{{ define "main" }}

{{ $deprecated := or .Params.deprecated false }}
{{ if $deprecated }}
<div class="maintenance-modal-container" onclick="this.remove();">
	<div class="maintenance-modal-content">
		This is one of my oldest projects and thus of a lower quality. You may still try it, of course, but I recommend checking out a newer game! (Click to remove this message.)
	</div>
</div>
{{ end }}

<div class="position-absolute opacity-half align-top width-maximize">
	<!--- Big background image fading into content --->
	{{ $src := partial "func/get-game-header.html" . }}
	{{ partial "content/show-image.html" (dict "context" . "src" $src "alt" "Header image for this project") }}
	<div class="gradient-fade-to-bg"></div>
</div>

<div class="width-limit block-center margin-top-xs">
	<div class="double-view double-view-main-sidebar">
		<!--- Media Gallery: Trailers, Screenshots, etc --->
		<div>
			{{ partial "content/media-gallery.html" (dict "context" .) }}

			{{ if .Params.collection }}
				{{ partial "navigation/collection-list.html" . }}
			{{ end }}
		</div> 

		<!--- Small image, small desc, anything else --->
		<div class="sidebar-block">
			{{ $src := partial "func/get-game-header.html" . }}
			{{ partial "content/show-image.html" (dict "context" . "src" $src "alt" "Header image for this project") }}
			<p class="text-italic">{{ .Params.blurb | markdownify }}</p>
			{{ partial "buttons/project-buttons.html" . }}
		</div>
	</div>

	<div class="double-view double-view-main-sidebar">
		<!--- Main content (of Markdown file) --->
		<main class="add-leafs-to-headings width-maximize">
			<h1>{{ .Title }}</h1>
			{{ .Content }}
			{{ partial "content/support.html" . }}
		</main>

		<!--- Metadata, etc. --->
		<div>
			{{ partial "metadata/metadata-block.html" . }}
		</div>
	</div>
</div>

{{ end }}