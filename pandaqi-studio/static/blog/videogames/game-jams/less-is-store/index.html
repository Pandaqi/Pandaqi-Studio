<!doctype html><html lang=en-US><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="IE=edge"><title>Less is Store | Pandaqi Blog</title>
<link rel=icon type=image/png href=https://pandaqi.com/blog//favicon.png><link rel=stylesheet type=text/css href=/blog/css/critical.min.css></head><body><header id=site-header><nav class=menu><ul><li><a href=https://pandaqi.com/blog/ class="masked-link big-mask mask-8" style=--rotation:0deg>Home</a></li><li><a href=/blog/boardgames/ class="masked-link big-mask mask-4" style=--rotation:-1.5deg>Boardgames</a></li><li><a href=/blog/news-and-updates/ class="masked-link big-mask mask-3" style=--rotation:0deg>News & Updates</a></li><li><a href=/blog/reviews-and-thoughts/ class="masked-link big-mask mask-8" style=--rotation:2deg>Reviews & Thoughts</a></li><li><a href=/blog/tutorials/ class="masked-link big-mask mask-7" style=--rotation:1deg>Tutorials</a></li><li><a href=/blog/videogames/ class="masked-link big-mask mask-8" style=--rotation:2deg>Videogames</a></li></ul></nav></header><main class="padding center-block"><article class=single-article><h1>Less is Store</h1><aside class=metadata><nav class=breadcrumbs><span class=metadata-label><span class=emoji>ü•ê</span> Breadcrumbs ||</span>
<a href=https://pandaqi.com/blog/>Home</a>
/
<a href=/blog/>Blog</a>
/
<a href=/blog/videogames/>Videogames</a>
/
<a href=/blog/videogames/game-jams/>Game jams</a>
/
<a href=/blog/videogames/game-jams/less-is-store/>Less is store</a></nav><script type=application/ld+json>{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"https:\/\/pandaqi.com\/blog\/","name":"home"}},{"@type":"ListItem","position":3,"item":{"@id":"\/blog\/","name":"blog"}},{"@type":"ListItem","position":4,"item":{"@id":"\/blog\/videogames\/","name":"videogames"}},{"@type":"ListItem","position":5,"item":{"@id":"\/blog\/videogames\/game-jams\/","name":"game-jams"}},{"@type":"ListItem","position":6,"item":{"@id":"\/blog\/videogames\/game-jams\/less-is-store\/","name":"less-is-store"}}]}</script><div><span class=metadata-label><span class=emoji>&#8987;</span> Published ||</span>
<time datetime=2023-05-13T14:00:00>Saturday, May 13, 2023</time></div><nav class=tags><span class=metadata-label><span class=emoji>üéó</span> Tags ||</span><ul><li><a href=https://pandaqi.com/blog/tags/devlog>devlog</a></li><li><a href=https://pandaqi.com/blog/tags/technical-devlog>technical devlog</a></li><li><a href=https://pandaqi.com/blog/tags/jam>jam</a></li></ul></nav><div><span class=metadata-label><span class=emoji>üìñ</span> Table of Contents ||</span>
<a href=# id=toc-toggle>Show</a></div></aside><aside id=table-of-contents class=masked-link-block><header><h2>Table of Contents</h2></header><nav id=TableOfContents><ul><li><a href=#whats-the-idea>What&rsquo;s the idea?</a></li><li><a href=#step-1-a-random-shop>Step 1: a random shop</a></li><li><a href=#step-2-add-a-player>Step 2: add a player</a></li><li><a href=#step-3-adding-clients>Step 3: adding clients</a></li><li><a href=#step-4-finishing-the-mechanics>Step 4: finishing the mechanics</a></li><li><a href=#step-5-teaching--progression>Step 5: Teaching / Progression</a></li><li><a href=#step-6-polish-and-finishing>Step 6: polish and finishing</a></li><li><a href=#conclusion>Conclusion</a></li></ul></nav></aside><div><p>Welcome to the devlog for <a href=https://pandaqi.itch.io/less-is-store>&ldquo;Less is Store&rdquo;</a>. This game was created for the GoGodot Jam (iteration 4).</p><p>Originally, I made an entirely different idea for this game jam. But my laptop is old and broken, and that idea was 3D &mldr; so after a few days, it just gave up. It crashed all the time, out of nowhere. And even if it didn&rsquo;t, it was just too <em>slow</em> and <em>laggy</em> to stay motivated and productive.</p><p>So I hastily came up with this new idea: &ldquo;Less is store&rdquo;. Which was 2D and <em>even simpler</em>, so it had to be fine.</p><h2 id=whats-the-idea>What&rsquo;s the idea?</h2><p>The theme of the jam was &ldquo;Less is More&rdquo;. When considering different genres, I stumbled upon the &ldquo;tycoon&rdquo; / &ldquo;management&rdquo; genre.</p><p>Usually, you start with <em>nothing</em> (an empty plot of land, no money, etcetera) and have to build it into <em>something big</em>.</p><p>What if we reverse that?</p><p>You start with a big store and lots of money. You want to <em>empty</em> the store (of machines/tables/whatever) and earn as <em>little</em> money as possible.</p><p>That &mldr; that was the whole idea.</p><h2 id=step-1-a-random-shop>Step 1: a random shop</h2><p>For this, I use a trick I learned some time ago (while experimenting with random generation for my board games).</p><ul><li>Start with an empty grid</li><li>Assign each cell a random &ldquo;weight&rdquo;</li><li>Ask a few imaginary entities to walk through this grid. (I use the built-in A* implementation of Godot. Very fast and simple to setup.)</li><li>The path they walk is marked as &ldquo;empty&rdquo; (and contains nothing)</li><li>Random cells <em>next</em> to that path are turned into obstacles (such as tables within the store from which items can be bought)</li></ul><p>Repeat this until (at least) X% of the whole grid is <em>filled</em>, and you&rsquo;re done.</p><p>Because the cells have random weights, the &ldquo;pathfinding&rdquo; algorithm will not necessarily pick the shortest path from one edge to another. It will deviate a bit, creating some corners and a more organic layout.</p><p>But because you mark the whole path as &ldquo;must be empty&rdquo;, you are <em>sure</em> that all areas of the store can be reached and have a pathway leading to it.</p><p>Implementation detail 1: I first generate the whole map, and only then <em>draw</em> it on one go. Mixing code/structure and drawing/graphics is basically <em>never</em> a good idea. Keeping it as two clearly separate steps prevents all sorts of nasty issues.</p><p>All the data about the cells is kept inside a <code>CellData</code> object. The visual representation is simply a node that adds some sprites/animations/extra logic, <em>and</em> has a variable called <code>data</code> that holds the original object.</p><p>Nearly 100% of the code in the game modifies the <code>CellData</code> data structure in the background. After every modification, I call <code>sync_visuals_to_data</code> (a function I programmed that does what it says), and it updates the visual side.</p><p>Implementation detail 2: each cell has several layers which need to be <em>sorted</em> correctly.</p><ul><li>BG = players/clients are always on top of this</li><li>Floor = an overlay on the BG, still on the floor though</li><li>Overlay = this one is actually depth sorted, and players/clients can stand &ldquo;behind&rdquo; or &ldquo;in front&rdquo; of this</li></ul><p>That&rsquo;s why, after setting the cell&rsquo;s type, I transfer each layer to the right location. In the future, I&rsquo;ll probably need better names (and systems) for such layers. But hey, this was a quick game with simple graphics.</p><h2 id=step-2-add-a-player>Step 2: add a player</h2><p>This isn&rsquo;t rocket science. The player is just a sprite with a body at the bottom. (Because of the perspective in such 2D games, the actual body that interacts with other stuff is only the <em>bottom</em> half of the sprite.)</p><ul><li>When given input, it moves in that direction.</li><li>When you press SPACE, it dashes: it applies a sudden (huge) force in your current direction, which is dampened every frame (multiplied by something like <code>0.99</code>), until you&rsquo;re back at normal speed again and regain control.</li></ul><p>The cells also get a (static) body, of course. The other clients get a body, but this one does <strong>not</strong> interact with the player body.</p><p>Instead, I detect if you &ldquo;hit&rdquo; a client by checking if the <code>Area2D</code> overlaps it. Why?</p><ul><li>The area can be <em>bigger</em> than the actual player. Which feels better to play. (Otherwise you might have <em>near misses</em> all the time, missing clients by a pixel, which just feels frustrating and unfair.)</li><li>If their bodies also collide, that might happen <em>before</em> the area registers it. Which leads to messy situations where the bodies are pushed apart by the physics engine, and now the area doesn&rsquo;t overlap anymore, and no hit is registered, which is a bug, &mldr;</li></ul><p>I can&rsquo;t create a walk animation to save my life. So I just use a very fast animation of two simple sprites :p And when you move towards the left, it flips horizontally (<code>flip_h = velocity.x &lt; 0</code>).</p><h2 id=step-3-adding-clients>Step 3: adding clients</h2><p>I&rsquo;ve already created the pathfinding code for generating the map (step 1). The clients merely have to reuse that, but add some extra behavior on top.</p><p>In short, they&rsquo;re just one big <strong>state machine</strong>, with these states.</p><ul><li>WALKING</li><li>GRABBING</li><li>STUNNED</li><li>ARRIVING / LEAVING</li></ul><p>Whenever we switch to a new state, I execute any logic I need.</p><ul><li>Walking? Pick a random table and find the path towards it. (If our backpack is full, go towards checkout instead.)</li><li>Grabbing? Add an item from a nearby table. Stand still for a bit. Then switch back to walking.</li><li>Stunned? Stand still for a bit. Then switch back to walking.</li><li>Arriving / Leaving? To make this look much better, I play some animations. While doing so, I don&rsquo;t want the clients to interact with <em>anything</em> (as that would mess them up), so these states are basically &ldquo;do-and-react-to-nothing&rdquo;.</li></ul><p>The &ldquo;stand still for a bit&rdquo; is handled by a simple <code>Timer</code> node, which fires once with a semi-random duration.</p><p>When I have a path for walking, I give it to a <code>PathWalker</code> module I wrote. It simply moves along the path at a certain speed, then checks when we&rsquo;re done.</p><aside class="remark masked-link-block"><span class=label>Remark ||</span><p>I don&rsquo;t follow the <em>path</em> per se. That would look robotic, with all the clients only walking through the exact <em>center</em> of each tile. Instead, I randomly offset those points so they land on other parts of the cell, creating a more random and organic path towards the destination.</p></aside><p>I expressly decided <strong>not</strong> to save the exact table or item we&rsquo;re going towards. Because &mldr; it might be gone by the time we get there. (Remember, one goal is to clean out the store, which means the player needs to be able to destroy the tiles.) Instead, they just walk towards a destination. Something is there? Grab it (go to GRABBING). Nothing is there? Go to WALKING again, with a different destination.</p><h2 id=step-4-finishing-the-mechanics>Step 4: finishing the mechanics</h2><p>If you could always dash &mldr; then there would be no point to it. It&rsquo;s faster than walking. So let&rsquo;s just slam that spacebar all the time! Never stop!</p><p>Additionally, a common issue with these kinds of games is that you can &ldquo;camp&rdquo; the location where your &ldquo;enemies&rdquo; arrive or leave.</p><p>To solve both issues, I decided to make dash a <em>powerup</em> you have to grab.</p><ul><li>Each dash powerup adds +1 dash power.</li><li>This is clearly <em>visible</em> and <em>intuitive</em>. (More so than, for example, a dash bar that &ldquo;automatically refills&rdquo;. That&rsquo;s more of a hidden mechanic that players will miss.)</li><li>It forces you to constantly move around and move away. (And to be smart about the routes you take.)</li><li>But it also allows you to &ldquo;save up&rdquo; on dash power, then use more of it at once for one big &ldquo;attack&rdquo;.</li></ul><p>It felt like a very easy addition that solved almost all issues with the idea that were left.</p><p>In fact, I didn&rsquo;t see anything else that needed solving. My only minor issues were &mldr;</p><ul><li>Moving around; it felt like we needed teleports or some <em>faster</em> way to get to the other side of the store. At the same time, however &mldr; the whole challenge of the game is to position well and take smart routes.</li><li>Repetitiveness; such a simple game with simple rules, will obviously lead to doing a lot of the same thing.</li></ul><p>But, in practice, these fell away. If the stages continue at the right pace, there&rsquo;s always something new to challenge you. The store is big enough (and the layout random enough) to get new situations all the time.</p><p>During development (over the course of a few days) I kept making the <strong>player faster</strong>, because it just felt much better and more exciting. That solved the &ldquo;teleport&rdquo; issue as well.</p><h2 id=step-5-teaching--progression>Step 5: Teaching / Progression</h2><p>I&rsquo;ve learned that creating the tutorial for your game is something you do <em>as quickly as possible</em>.</p><ul><li>It shows you how complicated the idea is. (And if too complicated, you must simplify right now.)</li><li>It must be done anyway, no matter what happens.</li><li>If you leave it until the last second, you&rsquo;ll probably speed through it and provide a very bad tutorial. Which means your game might be awesome &mldr; but nobody knows, because nobody understands.</li></ul><p>I&rsquo;ve also learned, after creating many games, that giving all information / rules beforehand is <em>never the way to go</em>. Even if you make it &ldquo;interactive&rdquo;&mdash;like &ldquo;now move towards the arrow&rdquo; and &ldquo;press A to do X now&rdquo;&mdash;that doesn&rsquo;t really work.</p><p>Instead, you must break all your rules and mechanics into small, bite-sized chunks. Then you feed them to the player <em>one at a time</em>, <em>over time</em>.</p><p>As such, I broke the game into &ldquo;stages&rdquo;.</p><ul><li>When a new stage starts, it shows a very simple tutorial image with one new rule or idea being added.</li><li>Then the stage lasts for a fixed duration (30 seconds, or 60 seconds)</li><li>After which the next stage starts</li></ul><p>The first stage? You can only <em>move</em>. Clients leave just by touching them.</p><p>The next stage adds dashing. Later stages add cell removal, different client types, a higher number of clients at the same time, and so forth.</p><p>This takes more work, at first. I have to map this out, build the system for stages, and create many more graphics and configurations.</p><p>But &mldr; once you have that, it&rsquo;s a vastly superior system to anything else (so I&rsquo;ve learned). I quickly asked others to test the game, didn&rsquo;t have to explain <em>anything</em> beforehand, and they had absolutely <em>no</em> issue playing and understanding immediately.</p><p>Once you reach the last stage, quite a lot is going on. Multiple controls, different clients, some more mechanics/rules. But that&rsquo;s no issue at all, because people learned them in bite-sized doses delivered once every 60 seconds.</p><aside class="remark masked-link-block"><span class=label>Remark ||</span><p>As said, this system also handles general &ldquo;progression&rdquo;. When you start the game for the first time, you don&rsquo;t want more than 1 or 2 clients in the store. That would be overwhelming and way too difficult. Their numbers only ramp up as you get to later stages.</p></aside><p>Combining all that, we get something like the video below.</p><figure><video width=100% controls>
<source src=vid1.webm type=video/webm>Your browser does not support the video tag.</video><figcaption>First prototype of game idea, after one evening of (panicked) work</figcaption></figure><h2 id=step-6-polish-and-finishing>Step 6: polish and finishing</h2><p>Polishing means &mldr;</p><ul><li>Adding sound effects</li><li>Adding animations</li><li>Adding particles</li><li>Adding textual feedback</li><li>Fixing minor annoyances or issues</li></ul><p>Nothing special to mention here. It&rsquo;s a part of game dev I find rather boring, but learned to do anyway, because it&rsquo;s that important. I also don&rsquo;t think all the special effects work together as well as they could in this game&mdash;but hey, I had no more time to spend on this project!</p><p>I created a few spritesheets for different clients. (And some differences between them, such as the kid that runs <em>fast</em> but has a <em>tiny backpack</em>.)</p><p>I added a timer that counts how long you survived. Felt like an obvious addition. (Otherwise it just says &ldquo;game over&rdquo;, no matter how well you did, no matter what happened in your game.)</p><p>I added a &ldquo;sale&rdquo; mechanic. It&rsquo;s a special tile that can appear in the store, and shows that a certain ingredient is now worth <em>more</em>. (As such, you DON&rsquo;T want people to buy that.)</p><p>Why? Because there was no point to having different items right now. Each was worth the exact same amount of points. There were no other defining characteristics. With the sale&mdash;or rather, the &ldquo;reverse sale&rdquo;&mdash;you now have one or two items for which you want to watch out.</p><p>I wrote down more ideas I could add.</p><ul><li>Conveyor belts (or teleports, at later stages) to help you move around</li><li>Other powerups, such as speed up/speed down</li><li>More client types</li><li>More applications for dashing, especially a &ldquo;radius&rdquo; ability. (Instead of only destroying cells/clients you pass through, do so in a circular radius around you. This would allow easily reaching people at the other side of the aisle, which would take a looong time to reach by walking.)</li></ul><p>Maybe I had time to add them, maybe not. But I was a bit tired and wanted to make more progress on my actual main project, so I left it at that.</p><p>Below are two more progress videos. (From day 2 and day 3)</p><figure><video width=100% controls>
<source src=vid2.webm type=video/webm>Your browser does not support the video tag.</video><figcaption>Second day of development, almost a playable game, just lacks polish and some finetuning</figcaption></figure><figure><video width=100% controls>
<source src=vid3.webm type=video/webm>Your browser does not support the video tag.</video><figcaption>A recording I did of the near-final game to get screenshots for the itch.io page.</figcaption></figure><h2 id=conclusion>Conclusion</h2><p>The only &ldquo;issue&rdquo; that came from my playtesting, was that the <em>dash</em> powerups were a bit hard to pick up. That was simply a matter of their collision shape being too small, so I made it more than twice as large.</p><p>There were some technical issues with sound effects not playing in the HTML5 build of the game. That&rsquo;s probably due to using Godot 4.0 which has &mldr; &ldquo;unpredictable&rdquo; HTML5 support. I didn&rsquo;t feel like wasting time investigating that further, pretty certain I&rsquo;d hit a wall (and just hear &ldquo;wait a few months and it will be fixed&rdquo;).</p><p>And that&rsquo;s the whole devlog!</p><p>As I said, I only had about 3 or 4 days for this. I also hadn&rsquo;t used Godot in a year, and certainly not the latest and greatest 4.0 version, which is why I kept the idea very minimal. And I&rsquo;m happy most of it just worked out first try, because I wouldn&rsquo;t have had time to fix any serious roadblocks :p</p><p>I really feel like Godot is hitting its stride now. The 4.0 version is <em>amazing</em> in terms of improvements, features, engine size ( = how fast it loads, how small it is), reliability. Creating this game for the jam &mldr; has given me back some motivation to make a game again. To make a <em>serious</em> game, which I can release professionally, with the current state of Godot Engine.</p><p>Yes, there are still some major bugs or missing parts. (The developers are aware and they&rsquo;re coming in 4.1 or 4.2.) Last minute, I had to completely redo all my Audio code because some feature just <em>did not work at all</em> and almost no information about that was available. (For those interested: at the moment, you can&rsquo;t set the AudioPlayer <code>stream</code> property through code, it just won&rsquo;t work on most exported platforms.)</p><p>Similarly, I had to convert all my <code>GPUParticles</code> to <code>CPUParticles</code> last minute. A conversion that went only 95% smoothly. Godot still has some clear roadblocks, but once those are gone, this is an engine I can see myself using for more and bigger games in the future.</p><p>I might create and publish my other idea for the jam at some later stage. It was similarly tiny, but I suspect it might work just as well. (The basic mechanics are similar, as they were obviously both conceived for the same jam.)</p><p>Until the next devlog,</p><p>Pandaqi</p></div></article><div><nav class=pagination><ul><li><a href=/blog/videogames/game-jams/devlog-windup-wizards/ class="masked-link big-mask mask-7" style=--rotation:0deg>&lt;&lt; Previous Page</a></li><li>Continue reading</li><li><span class=nav-disabled>No next page :(</span></li></ul></nav></div></main><footer id=site-footer><div class="padding center-block"><h3>More Pandaqi</h3><p>You could <a href=https://pandaqi.com>visit the game studio</a>.
Or my <a href=https://pandaqi.com/tutorials/>free tutorial website</a>.
Or my <a href=https://rodepanda.com/>portfolio</a> with easy access to absolutely everything I ever made.</p><h3>Latest</h3><nav class=latest><ul><li><a href=/blog/boardgames/the-outnumbered-series/nine-lives/>Nine Lives
(üêà)</a></li><li><a href=/blog/boardgames/the-outnumbered-series/nine-lives-math-meows/>Nine Lives: Math Meows
(üêà)</a></li><li><a href=/blog/reviews-and-thoughts/game-dev-how-to-prioritize/>Game Dev: How to prioritize?
(üí¨)</a></li><li><a href=/blog/reviews-and-thoughts/game-dev-what-are-you-telling-players/>Game Dev: What are you telling players?
(üí¨)</a></li><li><a href=/blog/reviews-and-thoughts/the-summer-of-game-jams/>The Summer of Game Jams (2024)
(üí¨)</a></li><li><a href=/blog/boardgames/swiftsmash-saga/cookie-smasher/>Cookie Smasher
(üç™)</a></li><li><a href=/blog/reviews-and-thoughts/my-thoughts-on-defold-engine/>My Thoughts on Defold Engine</a></li><li><a href=/blog/reviews-and-thoughts/my-thoughts-on-phaser-3-engine/>My Thoughts on Phaser 3</a></li><li><a href=/blog/reviews-and-thoughts/my-thoughts-on-godot-engine/>My Thoughts on the Godot game engine</a></li><li><a href=/blog/news-and-updates/no-more-play-store/>No More Play Store
(üì±)</a></li></ul></nav><h3>Sections</h3><nav><ul><li><a href=/blog/boardgames/>Boardgames
(üé≤)</a></li><li><a href=/blog/news-and-updates/>News & Updates
(üì¢)</a></li><li><a href=/blog/reviews-and-thoughts/>Reviews & Thoughts
(üí≠)</a></li><li><a href=/blog/tutorials/>Tutorials
(üë©‚Äçüéì)</a></li><li><a href=/blog/videogames/>Videogames
(üéÆ)</a></li></ul></nav><h3>Credits</h3><p>Theme by me (<a href=https://pandaqi.com>Pandaqi</a> üêº) &#183;
with ‚ù§Ô∏è &#183;
using <a href=https://gohugo.io>Hugo</a> &#183;
&copy; 2018&ndash;2024 Pandaqi Blog</p></div></footer><link rel=stylesheet type=text/css href=/blog/css/style.css><script src=/blog/js/main.bundle.min.js async defer></script></body></html>