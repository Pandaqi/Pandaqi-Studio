<!doctype html><html lang=en-US><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="IE=edge"><title>PQ_DAW: A music editor for the web | Pandaqi Blog</title>
<link rel=icon type=image/png href=https://pandaqi.com/blog//favicon.png><link rel=stylesheet type=text/css href=/blog/css/critical.min.css></head><body><header id=site-header><nav class=menu><ul><li><a href=https://pandaqi.com/blog/ class="masked-link big-mask mask-6" style=--rotation:1.5deg>Home</a></li><li><a href=/blog/boardgames/ class="masked-link big-mask mask-1" style=--rotation:0.5deg>Boardgames</a></li><li><a href=/blog/news-and-updates/ class="masked-link big-mask mask-8" style=--rotation:2deg>News & Updates</a></li><li><a href=/blog/reviews-and-thoughts/ class="masked-link big-mask mask-1" style=--rotation:1deg>Reviews & Thoughts</a></li><li><a href=/blog/tutorials/ class="masked-link big-mask mask-2" style=--rotation:0deg>Tutorials</a></li><li><a href=/blog/videogames/ class="masked-link big-mask mask-1" style=--rotation:0deg>Videogames</a></li></ul></nav></header><main class="padding center-block"><article class=single-article><div class=thumbnail-media><figure class=thumb-image><picture><img src=pq_daw-header2.webp loading=lazy decoding=async alt="Thumbnail / Header for article: PQ_DAW: A music editor for the web" title="Thumbnail / Header for article: PQ_DAW: A music editor for the web" width=1553 height=461></picture></figure></div><h1>PQ_DAW: A music editor for the web</h1><aside class=metadata><nav class=breadcrumbs><span class=metadata-label><span class=emoji>ü•ê</span> Breadcrumbs ||</span>
<a href=https://pandaqi.com/blog/>Home</a>
/
<a href=/blog/>Blog</a>
/
<a href=/blog/news-and-updates/>News and updates</a>
/
<a href=/blog/news-and-updates/pq-daw/>Pq daw</a></nav><script type=application/ld+json>{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"https:\/\/pandaqi.com\/blog\/","name":"home"}},{"@type":"ListItem","position":3,"item":{"@id":"\/blog\/","name":"blog"}},{"@type":"ListItem","position":4,"item":{"@id":"\/blog\/news-and-updates\/","name":"news-and-updates"}},{"@type":"ListItem","position":5,"item":{"@id":"\/blog\/news-and-updates\/pq-daw\/","name":"pq-daw"}}]}</script><div><span class=metadata-label><span class=emoji>&#8987;</span> Published ||</span>
<time datetime=2023-02-28T00:00:00>Tuesday, Feb 28, 2023</time></div><div><span class=metadata-label><span class=emoji>üìñ</span> Table of Contents ||</span>
<a href=# id=toc-toggle>Show</a></div></aside><aside id=table-of-contents class=masked-link-block><header><h2>Table of Contents</h2></header><nav id=TableOfContents><ul><li><a href=#how-to-use-it>How to use it?</a></li><li><a href=#what-can-it-do>What can it do?</a><ul><li><a href=#tracks>Tracks</a></li><li><a href=#parts>Parts</a></li><li><a href=#effects>Effects</a></li><li><a href=#general>General</a></li></ul></li><li><a href=#about-the-architecture>About the architecture</a><ul><li><a href=#everything-through-clean-html>Everything through clean HTML</a></li><li><a href=#functional-programming>Functional programming</a></li><li><a href=#vanilla>Vanilla</a></li></ul></li><li><a href=#documentation>Documentation</a><ul><li><a href=#daw>DAW</a></li><li><a href=#track>Track</a></li><li><a href=#adding>Adding</a></li></ul></li></ul></nav></aside><div><p>PQ_DAW ( = Pandaqi DAW) is a small, limited web implementation of a &ldquo;Digital Audio Workstation&rdquo;. It uses vanilla website code (HTML, CSS, JavaScript) and was designed to plug into the Hugo static website generator.</p><p>You can find it <a href=https://github.com/pandaqi/pq-daw>on GitHub</a>.</p><p>I created it to add interactive examples to my free <a href=https://pandaqi.com/tutorials/audio/music-mixing/>Music Mixing</a> guide.</p><p>In the future, it might be used in more guides on <a href=https://pandaqi.com/tutorials>Pandaqi Tutorials</a>. Because, well, I went a bit overboard and turned it into much more than just small example.</p><p><figure class=inline-image><picture><img src=pq_daw-header2.webp loading=lazy decoding=async alt="An example of what the DAW looks like" title="An example of what the DAW looks like" width=1553 height=461></picture><figcaption class=side-note><span>An example of what the DAW looks like</span></figcaption></figure></p><h2 id=how-to-use-it>How to use it?</h2><p>Download the project.</p><ul><li>Place the assets on your own (local) server (icons, extra sound files for the reverb plugin, &mldr;)</li><li>Load the CSS and JS files on your page.</li><li>(If you use Hugo: use the shortcodes to place a DAW on the page, with specific starting settings.)</li></ul><p>Ta da!</p><p>The Hugo stuff isn&rsquo;t necessary. It just provides a faster way to initialize a DAW with specific settings for my example. You can create the DAW completely from script, or recreate these few simple HTML nodes in your own system.</p><h2 id=what-can-it-do>What can it do?</h2><p>It mimics the basic functionality any music software will have. For free! Right in your browser!</p><p>It does so using the &ldquo;Web Audio API&rdquo;, which is built into every browser by default. It was also designed to be able to <em>hide</em> any part (to simplify the examples in my tutorials) and be as simple as possible. It surely misses a lot of functionality&mdash;feel free to use this as a starting point.</p><h3 id=tracks>Tracks</h3><p>These have the expected controls.</p><ul><li>Volume</li><li>Panning</li><li>Mute</li><li>Solo</li><li>Phase (Invert)</li><li>Record Enable</li></ul><h3 id=parts>Parts</h3><p>Tracks contain parts, as many as you want.</p><p>A part is just a &ldquo;source&rdquo;: any recording or sound. They can be resized, dragged around, etcetera.</p><p>Parts have these properties.</p><ul><li>Source (url to the source file to use)</li><li>Start / End / Duration ( = the actual playback in the DAW)</li><li>Offset ( = what part of the original source it plays)</li><li>Fade In / Fade Out</li></ul><h3 id=effects>Effects</h3><p>Tracks can hold effects, any order, any number. Clicking on their icon (in the track controls) will open/close their window below the track. That window includes the unique layout, buttons and visualization for that specific plugin.</p><p>These effects are supported.</p><ul><li>Compressor</li><li>Delay</li><li>Distortion</li><li>Equalizer</li><li>Gain</li><li>Noise</li><li>Reverb</li></ul><h3 id=general>General</h3><p>The DAW can</p><ul><li>Play / Pause / Stop</li><li>Record (record enable a track, allow the browser access to your mic, and you&rsquo;re good to go)</li><li>Render the final result (and download it as a <code>.wav</code> file)</li></ul><p>Rendering smartly reconstructs the whole DAW into an OfflineAudioContext. This means it only takes seconds to render (long) tracks.</p><h2 id=about-the-architecture>About the architecture</h2><h3 id=everything-through-clean-html>Everything through clean HTML</h3><p>This system uses the actual HTML structure for everything. There are almost no variables saved in the JavaScript: any setting or element is an actual HTML node with attributes. When needed, it gets/sets that live.</p><p>EXAMPLE: The volume slider changes the attribute <code>data-volume</code> on the track. It has a callback that recalculates the total volume on change. (Taking into account things like <code>mute</code>, by, as you guessed, reading <code>data-mute</code> on the track.) Whenever I need that volume somewhere else, it just reads that &ldquo;data-volume&rdquo; attribute. There is no <code>volume</code> variable in the track object.</p><p>This is very <em>nice</em>. It ensures easy code and consistency. It means you can <em>copy</em> the whole DAW just by copying the HTML. (Which is exactly what I do for that &ldquo;offline rendering&rdquo; trick.) It means you can press F12 and actually see if settings are changing properly, or how an effect is configured.</p><h3 id=functional-programming>Functional programming</h3><p>I tried to go more &ldquo;Rust style&rdquo; this time. I ended up failing, partially, because creating a DAW is hard enough without such a challenge :p</p><p>But it means that &mldr;</p><ul><li>The code mostly uses objects that <em>do</em> one thing. (For example, the DAW object has no logic for actually playing its contents or visualizing it. It just <em>holds</em> its content. Those functions are handled by <code>Player</code> and <code>Display</code>.)</li><li>It tries to give variables / information only one owner, with minimal global variables or dependencies.</li></ul><p>This is something on which I can improve in future versions.</p><h3 id=vanilla>Vanilla</h3><p>I like staying lean. I&rsquo;ve learned the value of designing something for a specific purpose or set of constraints. (You would use different wheels for a car driving through snow than a car driving on asphalt. Even if the latter type were great, quality wheels.)</p><p>This package therefore has no dependencies and also doesn&rsquo;t use many modern &ldquo;tricks&rdquo;. It&rsquo;s vanilla JavaScript, coded in such a way that it can be easily understood, and I don&rsquo;t get headaches from learning how the heck Web Audio works in three days.</p><p>In general, I aggressively avoid adding fluff :p</p><p>EXAMPLE: At some point, this DAW could also export to mp3 (and other formats). But the smallest I could get (with my limited knowledge of audio file formats), was with a library that was 10x the size of my current project size. Not a great deal, so it goes away. One lossless <code>.wav</code> output is enough.</p><h2 id=documentation>Documentation</h2><p>Any element with the class <code>pq-daw-wrapper</code> will be converted to a DAW. All the DAWs on the page are accessible in the global variable <code>DAWS</code>.</p><p>If you <strong>don&rsquo;t want this</strong>, do it manually. Don&rsquo;t give your containers this class name. Whenever you want to create a daw, call</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=ln>1</span><span class=cl><span class=o>//</span> <span class=n>you</span> <span class=n>need</span> <span class=n>to</span> <span class=n>manually</span> <span class=n>decide</span> <span class=n>your</span> <span class=n>parent</span> <span class=n>container</span>
</span></span><span class=line><span class=ln>2</span><span class=cl><span class=k>const</span> <span class=n>newDaw</span> <span class=o>=</span> <span class=n>new</span> <span class=n>PQ_DAW</span><span class=o>.</span><span class=n>Daw</span><span class=p>({</span> <span class=n>parent</span><span class=p>:</span> <span class=n>someParentContainer</span> <span class=p>});</span> 
</span></span><span class=line><span class=ln>3</span><span class=cl><span class=n>await</span> <span class=n>newDaw</span><span class=o>.</span><span class=n>loadResources</span><span class=p>();</span>
</span></span></code></pre></div><p>Below, all the <code>params</code> are <em>optional</em> objects with all keys <em>optional</em>.</p><h3 id=daw>DAW</h3><p>On those objects, you can call &mldr;</p><ul><li><code>addTrack(params)</code> => adds a track. If key <code>redraw</code> is true on params, it redraws the whole DAW.</li><li><code>removeTrack(params)</code> => removes the last track. If key <code>track</code> is set on params, it removes that track.</li><li><code>getTracks()</code> => returns a list with all track objects</li></ul><h3 id=track>Track</h3><p>On the tracks, you can call &mldr;</p><ul><li><code>addPart(params)</code> => adds a part. Params can have the optional keys<ul><li><code>dataset</code> => an object with part parameters to set (as mentioned above)</li><li><code>recalculate</code> => if given incomplete parameters, this calculates the missing info</li><li><code>redraw</code> => redraws the whole track (often what you want)</li></ul></li><li><code>removePart(params)</code> => removes the last part. If key <code>part</code> is set on params, it removes that part.</li><li><code>getParts()</code> => returns a list with all part objects</li></ul><p>Additionally, you can add and remove effects with &mldr;</p><ul><li><code>addEffect(params)</code> => adds an effect. Use key <code>type</code> on params (a string) to determine the effect to add.</li><li><code>removeEffect(params)</code> => removes the last effect. If key <code>effect</code> is set on params, it removes that effect.</li><li><code>getEffects()</code> => returns a list with all effects</li></ul><h3 id=adding>Adding</h3><p>As mentioned, this system does everything through the HTML. As such, the params of every &ldquo;add&rdquo; function can receive a <code>node</code> key.</p><p>It should hold an HTML node with all the properties for setup. (For example, &ldquo;data-type&rdquo; set to &ldquo;automation&rdquo; to get an automation track).</p><p>You can, obviously, do this without an existing HTML node. Just pass an object with the <code>dataset</code> key:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=ln>1</span><span class=cl><span class=k>const</span> <span class=n>params</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>2</span><span class=cl>    <span class=n>node</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>3</span><span class=cl>        <span class=n>dataset</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>4</span><span class=cl>            <span class=n>type</span><span class=p>:</span> <span class=s2>&#34;automation&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=ln>5</span><span class=cl>            <span class=o>//</span> <span class=o>...</span> <span class=n>any</span> <span class=n>other</span> <span class=n>properties</span> <span class=n>here</span> <span class=o>...</span>
</span></span><span class=line><span class=ln>6</span><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=ln>7</span><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=ln>8</span><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=ln>9</span><span class=cl><span class=n>daw</span><span class=o>.</span><span class=n>addTrack</span><span class=p>(</span><span class=n>params</span><span class=p>);</span>
</span></span></code></pre></div><p>This should work. If it doesn&rsquo;t, let me know. (I couldn&rsquo;t test this as deeply, as I don&rsquo;t use this system that way <em>ever</em>.)</p><p>The possible properties are the ones I explained at &ldquo;What can it do?&rdquo; above. (I might have missed some. Look at the Hugo shortcodes (or read the source) to find <em>all</em> of them.)</p><p>That&rsquo;s it! The structure is so consistent that it almost feels like I haven&rsquo;t explained enough. But it&rsquo;s simply:</p><ul><li>Create a DAW (either through existing HTML, or manually)</li><li>Create new tracks/parts by passing in existing HTML, or an object with your parameters set in the &ldquo;dataset&rdquo; key</li></ul><p>All feedback welcome.</p></div></article><div><nav class=pagination><ul><li><a href=/blog/news-and-updates/pq-words/ class="masked-link big-mask mask-4" style=--rotation:-1.5deg>&lt;&lt; Previous Page</a></li><li>Continue reading</li><li><a href=/blog/news-and-updates/pandaqi-games-2023-update-ii/ class="masked-link big-mask mask-8" style=--rotation:2deg>>> Next Page</a></li></ul></nav></div></main><footer id=site-footer><div class="padding center-block"><h3>More Pandaqi</h3><p>You could <a href=https://pandaqi.com>visit the game studio</a>.
Or my <a href=https://pandaqi.com/tutorials/>free tutorial website</a>.
Or my <a href=https://rodepanda.com/>portfolio</a> with easy access to absolutely everything I ever made.</p><h3>Latest</h3><nav class=latest><ul><li><a href=/blog/reviews-and-thoughts/should-you-let-your-kids-win/>Should you let your kids win?
(üí¨)</a></li><li><a href=/blog/boardgames/slippery-slopes/>Slippery Slopes
(üêò)</a></li><li><a href=/blog/news-and-updates/pandaqi-games-2024-update/>Pandaqi Games: 2024 Update
(üéÆ)</a></li><li><a href=/blog/reviews-and-thoughts/why-rules-should-be-less-strict/>Why rules should be less strict
(üí¨)</a></li><li><a href=/blog/boardgames/mammoth-messages/>Mammoth Messages
(üêò)</a></li><li><a href=/blog/boardgames/kangaruse/>Kangaruse
(ü¶ò)</a></li><li><a href=/blog/news-and-updates/my-journey-to-becoming-a-game-designer/>My Journey to Becoming a Game Designer
(üé≤)</a></li><li><a href=/blog/news-and-updates/pandaqi-games-solving-the-nightmare-of-text/>Pandaqi Games: Solving the Nightmare called Text
(üéÆ)</a></li><li><a href=/blog/boardgames/waitless-games/creature-quellector/>Creature Quellector
(üêâ)</a></li><li><a href=/blog/boardgames/waitless-games/finger-food/>Finger Food
(üñêÔ∏è)</a></li></ul></nav><h3>Sections</h3><nav><ul><li><a href=/blog/boardgames/>Boardgames
(üé≤)</a></li><li><a href=/blog/news-and-updates/>News & Updates
(üì¢)</a></li><li><a href=/blog/reviews-and-thoughts/>Reviews & Thoughts
(üí≠)</a></li><li><a href=/blog/tutorials/>Tutorials
(üë©‚Äçüéì)</a></li><li><a href=/blog/videogames/>Videogames
(üéÆ)</a></li></ul></nav><h3>Credits</h3><p>Theme by me (<a href=https://pandaqi.com>Pandaqi</a> üêº) &#183;
with ‚ù§Ô∏è &#183;
using <a href=https://gohugo.io>Hugo</a> &#183;
&copy; 2018&ndash;2024 Pandaqi Blog</p></div></footer><link rel=stylesheet type=text/css href=/blog/css/style.css><script src=/blog/js/main.bundle.min.js async defer></script></body></html>