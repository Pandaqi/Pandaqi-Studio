<!doctype html><html lang=en-US><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="IE=edge"><title>Pandaqi Games: 2023 Update (III) | Pandaqi Blog</title>
<link rel=icon type=image/png href=https://pandaqi.com/blog//favicon.png><link rel=stylesheet type=text/css href=/blog/css/critical.css><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin></head><body><header id=site-header><nav class=menu><ul><li><a href=https://pandaqi.com/blog/ class="masked-link big-mask mask-5" style=--rotation:-1deg>Home</a></li><li><a href=/blog/boardgames/ class="masked-link big-mask mask-4" style=--rotation:-1.5deg>Boardgames</a></li><li><a href=/blog/news-and-updates/ class="masked-link big-mask mask-6" style=--rotation:0deg>News & Updates</a></li><li><a href=/blog/reviews-and-thoughts/ class="masked-link big-mask mask-6" style=--rotation:0deg>Reviews & Thoughts</a></li><li><a href=/blog/tutorials/ class="masked-link big-mask mask-1" style=--rotation:2deg>Tutorials</a></li><li><a href=/blog/videogames/ class="masked-link big-mask mask-5" style=--rotation:2deg>Videogames</a></li></ul></nav></header><main class="padding center-block"><article class=single-article><h1>Pandaqi Games: 2023 Update (III)</h1><aside class=metadata><nav class=breadcrumbs><span class=metadata-label><span class=emoji>ü•ê</span> Breadcrumbs ||</span>
<a href=https://pandaqi.com/blog/>Home</a>
/
<a href=https://pandaqi.com/blog//blog/>Blog</a>
/
<a href=https://pandaqi.com/blog//blog/news-and-updates/>News and updates</a>
/
<a href=https://pandaqi.com/blog//blog/news-and-updates/pandaqi-games-2023-update-iii/>Pandaqi games 2023 update iii</a></nav><script type=application/ld+json>{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"https:\/\/pandaqi.com\/blog\/","name":"home"}},{"@type":"ListItem","position":3,"item":{"@id":"https:\/\/pandaqi.com\/blog\/\/blog\/","name":"blog"}},{"@type":"ListItem","position":4,"item":{"@id":"https:\/\/pandaqi.com\/blog\/\/blog\/news-and-updates\/","name":"news-and-updates"}},{"@type":"ListItem","position":5,"item":{"@id":"https:\/\/pandaqi.com\/blog\/\/blog\/news-and-updates\/pandaqi-games-2023-update-iii\/","name":"pandaqi-games-2023-update-iii"}}]}</script><div><span class=metadata-label><span class=emoji>&#8987;</span> Published ||</span>
<time datetime=2023-05-08T00:00:00>Monday, May 8, 2023</time></div><div><span class=metadata-label><span class=emoji>üìñ</span> Table of Contents ||</span>
<a href=# id=toc-toggle>Show</a></div></aside><aside id=table-of-contents class=masked-link-block><header><h2>Table of Contents</h2></header><nav id=TableOfContents><ul><li><a href=#how-it-works>How it works</a></li><li><a href=#going-forward>Going forward</a></li></ul></nav></aside><div><p>Over the year, I&rsquo;ve published a few updates on this blog about the inner workings of <a href=https://pandaqi.com>Pandaqi Games</a>.</p><p>First, I explained how the code was a HUGE mess (from almost 10 years of projects, going back to when I was a kid and had no clue what good programming was). I solved that by moving everything into simple libraries that were reused across the whole website.</p><p>Then I explained how I figured out this was still far from ideal. Many games were loading 0.5 MB of stuff they didn&rsquo;t need. I had to manually toggle lots of things on/off. I discovered the built-in JSBuild system from Hugo and how powerful/useful it was. So I rewrote those major libraries using the build system and migrated the newer games to it.</p><p>Fast forward a few weeks. I&rsquo;m already hitting the limitations of <em>that</em> update :p Well, rather, I still think it could be automated further and be setup to prevent issues in the future.</p><p>Why? When migrating older games to the new system, suddenly all sorts of (tiny) bugs cropped up. The bugs were apparently always there&mdash;it&rsquo;s just that the new system is smart enough to report those. Similarly, I discovered a game that needed to load the Phaser library, but it didn&rsquo;t, so now the whole game page was basically broken.</p><p>Problems, problems, and I don&rsquo;t want those. The final straw was the publication of Phaser 3.60. A <em>huge</em> update that added a new way to use it: as modules. (Which prepares us for Phaser 4, which should be entirely modular and using the modern prototypal way of writing JS.)</p><p>Instead of manually telling my website &mldr;</p><blockquote><p>&ldquo;Hey, I promise this game will need the Phaser library, so load it <em>first</em> for me, alright?&rdquo;</p></blockquote><p>&mldr; I can simply include the modules I want right into the JS code for that specific game. If it compiles, I know for sure that the necessary Phaser components were loaded. And with that change, I will <em>finally</em> be free of manual tweaking and potential bombs waiting to go off.</p><p>The website would just have my &ldquo;PQ_GAMES&rdquo; library, consisting of many tiny modules (one for creating a PDF, one for starting Phaser, etcetera) that each game can use as they want.</p><p>Clean, fast, consistent, and hopefully the last major behind-the-scenes update I have to do in a loooong time. If it all builds/compiles, I can sleep safe, knowing I haven&rsquo;t let another game stay broken for a long time without knowing it.</p><aside class="remark masked-link-block"><span class=label>Remark ||</span><p>As always, I wished I&rsquo;d done this years ago, and hadn&rsquo;t started creating (big, public) projects when I wasn&rsquo;t quite &mldr; fully formed as a programmer yet. You live and you learn.</p></aside><aside class="remark masked-link-block"><span class=label>Remark ||</span><p>Another side-effect is code that&rsquo;s shorter and easier to read. The old way of creating Phaser scenes, and making sure Phaser was loaded before executing them, was &mldr; messy. Lots of boilerplate, copied code, and indentation :p Now, the code for generating a board can just be a clean class and that&rsquo;s it.</p></aside><h2 id=how-it-works>How it works</h2><p>Last article proudly proclaimed how my &ldquo;PQ_CANVAS&rdquo; library would be loaded automatically for each game. Well, that idea turned around 180 degrees.</p><p>The library is now called PQ_GAMES (much better name, of course, as it&rsquo;s not just about drawing to a canvas). It does <strong>not</strong> load automatically, only for games that specifically say <code>pqGames: true</code> in their frontmatter.</p><p>Because anything a game needs from it will be <em>build into its JavaScript bundle</em>. To play that game, I just need to load the resulting bundle (with all the custom game code), and we&rsquo;re good. I only keep custom support around for my oldest games, which I haven&rsquo;t found the time or energy to convert. (Because I might remove them entirely, or because the code just doesn&rsquo;t fit at all with the new system and would need serious rewrites.)</p><p>Now, there are some downsides to this.</p><ul><li>Every single bundle on the website, for every game, is inflated in size. Because what used to be loaded as a general library across the whole website (e.g. Phaser), is now (partially) <em>build into</em> each bundle.</li><li>Even more rewriting and restructuring work for me, potentially breaking many small things for games that I will not discover for months :p I can test if a game works in general. I have confidence in my code, especially the latest projects. But I can&rsquo;t test <em>everything</em> again, before publishing new updates to the website.</li></ul><p>Other than that, this update leads to more certainty and less manual labor for me. It also prepares for a future in which I &mldr;</p><ul><li>Either use Phaser 4, which should be completely modular and slide into this system perfectly</li><li>Or step away from Phaser entirely, replacing the things I use it for with custom modules grabbed from my own PQ_GAMES library.</li></ul><aside class="remark masked-link-block"><span class=label>Remark ||</span><p>As you see, Phaser is one of the big issues here. That library is HUGE and basically my only external dependency, even though I only use a <em>tiny subset</em> of what it can do. But it&rsquo;s intertwined with the whole website, tens of fully-fledged games, so I can&rsquo;t just get rid of it.</p></aside><h2 id=going-forward>Going forward</h2><p>Some tiny, hidden things here and there will surely be broken. Maybe one obscure setting for a game stopped working, or a very old project of mine suddenly changed its look (because we bumped from a rather old version of Phaser to the newest one).</p><p>Other than that, everything now integrates nicely and has way better checks for safety and correctness. I <em>expect</em> this to be the last big change to the website for a while. Once Phaser 4 rolls around, I will move to its modular system, which should considerably reduce file size on all JavaScript bundles. (And yes, the creator has said that it will launch without 100% of its features. But I only need some very basic things that I&rsquo;m certain it will have from the start.)</p><p>Most new games, especially this year, already use my <code>PQ_GAMES</code> for everything and nothing else. Over time, I expect the (very) oldest games to just &mldr; go away, and before you know it, we&rsquo;re only left with projects using the same, modern system.</p><p>Similarly, over time my own library will grow and contain more functionality. For example, I recently added a function to <em>tint an image</em> (which I used to randomly recolor parts of material for a board game), and another helper function that checks <em>if a line intersects another line</em> (because I was surprised by how often I needed that exact thing).</p><p>The library will be tailored completely to the needs of <em>my</em> website, my work, my games. So I&rsquo;m not sure if I&rsquo;ll ever publish it publicly or do more with it. But the plan is to have a future in which the site relies solely on that one set of tools I&rsquo;ve built and maintained&mdash;and kept small, minimal, and fast&mdash;and nothing else.</p><p>This year has seen the biggest updates to Pandaqi (Boardgames) ever. Many, many games released. The website is basically a completely new website at this point. Let&rsquo;s hope this prepares us for an even brighter future :)</p></div></article><div><nav class=pagination><ul><li><a href=/blog/news-and-updates/pandaqi-games-2023-update-ii/ class="masked-link big-mask mask-7" style=--rotation:0deg>&lt;&lt; Previous Page</a></li><li>Continue reading</li><li><a href=/blog/news-and-updates/pandaqi-games-the-big-typescript-update/ class="masked-link big-mask mask-8" style=--rotation:1.5deg>>> Next Page</a></li></ul></nav></div></main><footer id=site-footer><div class="padding center-block"><h3>More Pandaqi</h3><p>You could <a href=https://pandaqi.com>visit the game studio</a>.
Or my <a href=https://pandaqi.com/tutorials/>free tutorial website</a>.
Or my <a href=https://rodepanda.com/>portfolio</a> with easy access to absolutely everything I ever made.</p><h3>Latest</h3><nav class=latest><ul><li><a href=/blog/boardgames/mammoth-messages/>Mammoth Messages
(üêò)</a></li><li><a href=/blog/boardgames/kangaruse/>Kangaruse
(ü¶ò)</a></li><li><a href=/blog/news-and-updates/my-journey-to-becoming-a-game-designer/>My Journey to Becoming a Game Designer
(üé≤)</a></li><li><a href=/blog/news-and-updates/pandaqi-games-solving-the-nightmare-of-text/>Pandaqi Games: Solving the Nightmare called Text
(üéÆ)</a></li><li><a href=/blog/boardgames/creature-quellector/>Creature Quellector
(üêâ)</a></li><li><a href=/blog/boardgames/finger-food/>Finger Food
(üñêÔ∏è)</a></li><li><a href=/blog/news-and-updates/why-my-games-were-removed-from-the-play-store/>Why all my games were removed from the Play Store
(üì±)</a></li><li><a href=/blog/boardgames/kingseat/>Kingseat
(üëë)</a></li><li><a href=/blog/boardgames/foldigami/>Foldigami
(üìÉ)</a></li><li><a href=/blog/news-and-updates/pandaqi-games-the-big-typescript-update/>Pandaqi Games: The Big Typescript Update
(üéÆ)</a></li></ul></nav><h3>Sections</h3><nav><ul><li><a href=/blog/boardgames/>Boardgames
(üé≤)</a></li><li><a href=/blog/news-and-updates/>News & Updates
(üì¢)</a></li><li><a href=/blog/reviews-and-thoughts/>Reviews & Thoughts
(üí≠)</a></li><li><a href=/blog/tutorials/>Tutorials
(üë©‚Äçüéì)</a></li><li><a href=/blog/videogames/>Videogames
(üéÆ)</a></li></ul></nav><h3>Credits</h3><p>Theme by me (<a href=https://pandaqi.com>Pandaqi</a> üêº) &#183;
with ‚ù§Ô∏è &#183;
using <a href=https://gohugo.io>Hugo</a> &#183;
&copy; 2018&ndash;2024 Pandaqi Blog</p></div></footer><link rel=stylesheet type=text/css href=/blog/css/style.css><script src=/blog/js/main.bundle.min.js async defer></script></body></html>