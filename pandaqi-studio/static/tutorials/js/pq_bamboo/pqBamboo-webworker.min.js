importScripts("/tutorials/js/lib-pqBamboo.min.js");function displayFeedback(e,t,n){let s="";if(t.length<=0)return s;e.fb.result&&(s+=n.print().print({header:"Result",class:"bamboo-final-result"}));for(const n of t){if(n.is("log")&&!e.fb.log)continue;if(n.is("keyword")&&!e.fb.keyword)continue;if(n.is("parser")&&!e.fb.parser)continue;if(n.is("comment")&&!e.fb.comment)continue;if((n.isLiteral()||n.isBag())&&!e.fb.value)continue;s+=n.print()}return s}self.addEventListener("message",e=>{let n=JSON.parse(e.data),a=n.code,s=n.config,o=new PQ_BAMBOO.Lexer(s),t=o.parse(a);if(o.isInvalid(t)){self.postMessage(JSON.stringify({}));return}let r=t.toString(),i=t.toResult(),c=displayFeedback(s,t.getFeedback(),i);const l={result:i,feedback:c,text:r};self.postMessage(JSON.stringify(l))},!1)